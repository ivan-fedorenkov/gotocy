// unveil2.js - 2.0.3 - https://nabble.github.io/unveil2/
!function(a){"use strict";var b="unveil",c="src",d=a(),e=!1;a.fn.unveil=function(f){function g(a){return!(!a.width()&&!a.height())&&"none"!==a.css("display")}function h(a){a.addClass(b+"-loading")}function i(a){a.removeClass(b+"-placeholder "+b+"-loading"),a.addClass(b+"-loaded")}function j(){var b=a(this);if(g(b)){var c=n.scrollTop(),d=c+o,e=r.container[0]!==n[0]?c-r.container.offset().top:0,f=b.offset().top+e,h=f+b.height();return h>=c-r.offset&&f<=d+r.offset}}function k(){o=n.height(),m()}function l(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){a(),b=!1},r.throttleTimeout))}}function m(){r.debug;var a=d.filter(j);a.trigger(b),d=d.not(a),a.length&&r.debug}f=f||{};var n=a(window),o=n.height(),p=window.devicePixelRatio>1,q={container:n,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",offset:0,breakpoints:[],throttleTimeout:250,debug:!1,loading:null,loaded:null},r=a.extend(!0,{},q,f);return r.debug,r.breakpoints.sort(function(a,b){return b.minWidth-a.minWidth}),this.one(b,function(){var b,d,e,f,g=a(this),j=n.width(),k=c;for(b=0;b<r.breakpoints.length;b++){var l=r.breakpoints[b].attribute.replace(/^data-/,"");if(j>=r.breakpoints[b].minWidth&&g.data(l)){k=l;break}}e=f=g.data(k),e&&-1!==e.indexOf("|")&&(f=e.split("|")[1],e=e.split("|")[0]),e&&(d=p&&f?f:e,r.debug,h(g),"function"==typeof r.loading&&r.loading.call(this),g.one("load",function(){i(g),"function"==typeof r.loaded&&r.loaded.call(this),m()}),"IMG"===this.nodeName?g.prop(c,d):a("<img/>").attr(c,d).one("load",function(){a(this).remove(),g.css("backgroundImage","url("+d+")").trigger("load")}),this.complete&&i(g))}),this.each(function(){var e=a(this),f=e.data(c+"-placeholder")||r.placeholder;d=a(d).add(this),e.data(b)||(e.data(b,!0),e.data(c)||e.data(c,e.prop(c)),e.one("load",function(){a(this).addClass(b+"-placeholder"),m()}).prop(c,"").prop(c,f))}),r.debug,e||(r.container.on({"resize.unveil":l(k),"scroll.unveil":l(m),"lookup.unveil":m}),e=!0),setTimeout(m,0),this}}(window.jQuery||window.Zepto);